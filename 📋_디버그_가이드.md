# 📋 APK 디버그 가이드

## 🔍 현재 상황

APK가 보라색 로딩 화면에서 멈춰있습니다.

---

## 🛠️ 디버그 APK

```
파일명: Pumpy_DEBUG_2025-10-26_1204.apk
위치: C:\Users\guddn\Downloads\COCO\
크기: 63.16 MB
```

**추가된 기능:**
- ✅ 상세 에러 메시지 (Alert)
- ✅ HTTP 오류 상태 코드 표시
- ✅ 로딩 진행률 로그
- ✅ JavaScript 에러 캡처
- ✅ WebView 상태 로그

---

## 🧪 테스트 페이지

간단한 테스트 페이지를 만들었습니다:

```
URL: http://3.27.28.175/test.html
```

**기능:**
- WebView 작동 확인
- API 연결 테스트
- 화면 정보 표시
- 실제 앱으로 이동 버튼

---

## 📱 테스트 방법

### 1단계: 디버그 APK 설치
```
Pumpy_DEBUG_2025-10-26_1204.apk 설치
```

### 2단계: 앱 실행 및 확인
앱을 실행하면 다음 중 하나가 발생합니다:

#### A. 에러 메시지 표시
- Alert 창이 뜹니다
- 에러 내용 확인 가능
- 스크린샷 찍어서 공유해주세요

#### B. 여전히 로딩 화면
- 20초 후 타임아웃 메시지 표시
- 네트워크 연결 확인 필요

#### C. 정상 작동
- 페이지가 로드됨
- 문제 해결!

---

## 🔧 테스트 페이지로 변경

App.tsx에서 테스트 모드를 활성화할 수 있습니다:

```typescript
// pumpy-app/App.tsx
const TEST_MODE = true;  // false → true로 변경
```

그러면 `http://3.27.28.175/test.html`이 로드됩니다.

---

## 📊 예상 문제와 해결

### 문제 1: WebView가 리소스를 로드하지 못함
**증상:** 로딩 화면에서 멈춤
**원인:** Next.js의 `/_next/static/` 경로를 WebView가 로드 못함
**해결:**
- 테스트 페이지가 작동하면 → Next.js 문제
- 테스트 페이지도 안 되면 → WebView 설정 문제

### 문제 2: JavaScript 실행 실패
**증상:** 페이지는 로드되지만 동작 안 함
**원인:** Next.js의 JavaScript 번들 로드 실패
**해결:**
- Chrome DevTools로 확인
- Nginx 설정 확인

### 문제 3: API 호출 실패
**증상:** 페이지는 로드되지만 데이터 없음
**원인:** CORS 또는 API URL 문제
**해결:**
- API URL을 절대 경로로 수정 (이미 완료)
- Django CORS 설정 확인

### 문제 4: 네트워크 연결 실패
**증상:** "연결 오류" Alert 표시
**원인:** 
- WiFi/모바일 데이터 연결 문제
- 방화벽 차단
- 서버 다운
**해결:**
- 브라우저에서 http://3.27.28.175 확인
- 서버 상태 확인

---

## 🚨 즉시 확인할 사항

### 1. 브라우저 테스트
브라우저(Chrome)에서 다음 URL들을 테스트하세요:

```
http://3.27.28.175/test.html      (테스트 페이지)
http://3.27.28.175/app/            (실제 앱)
http://3.27.28.175/api/            (API)
```

### 2. 서버 상태 확인
```bash
ssh ubuntu@3.27.28.175
pm2 list
sudo systemctl status nginx
```

### 3. WebView 로그 확인
Android Studio의 Logcat으로 확인:
```
adb logcat | grep -i "webview\|console\|error"
```

---

## 💡 다음 단계

### 시나리오 A: 테스트 페이지가 작동함
→ Next.js 앱에 문제가 있음
→ Next.js 설정 수정 필요

### 시나리오 B: 테스트 페이지도 안 됨
→ WebView 자체에 문제가 있음
→ Android 네트워크 설정 확인 필요

### 시나리오 C: 에러 메시지 표시
→ 에러 내용에 따라 대응
→ 에러 메시지 공유해주세요

---

## 📸 스크린샷 요청

다음 화면들의 스크린샷을 찍어주세요:

1. **앱 로딩 화면** (현재 상태)
2. **20초 후** (타임아웃 메시지)
3. **에러 Alert** (표시되는 경우)
4. **테스트 페이지** (test.html 접속 시)

---

## 🎯 목표

1. 정확한 에러 원인 파악
2. WebView vs Next.js 문제 구분
3. 빠른 해결 방법 찾기

---

**파일:**
- 디버그 APK: `Pumpy_DEBUG_2025-10-26_1204.apk`
- 테스트 URL: `http://3.27.28.175/test.html`
- 실제 앱 URL: `http://3.27.28.175/app/`

