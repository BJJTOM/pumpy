# 🎯 최종 수정 가이드

## ❗ 중요: AWS 서버 배포 먼저 필요

현재 로컬 DB에는 모든 변경사항이 반영되었지만, 
앱이 연결하는 **AWS 서버 (http://3.27.28.175)** 에는 아직 배포되지 않았습니다.

### AWS 서버 배포 방법

```bash
# 1. SSH 접속
ssh -i "your-key.pem" ubuntu@3.27.28.175

# 2. 백업
cd /home/ubuntu
tar -czf gym_api_backup_$(date +%Y%m%d).tar.gz gym_api/

# 3. 로컬 파일 업로드 (로컬 PC에서 실행)
cd C:\Users\guddn\Downloads\COCO
scp -i "your-key.pem" -r gym_api/* ubuntu@3.27.28.175:/home/ubuntu/gym_api/

# 4. 서버에서 마이그레이션
cd /home/ubuntu/gym_api
source venv/bin/activate
python manage.py makemigrations
python manage.py migrate

# 5. 서버 재시작
sudo systemctl restart gunicorn
sudo systemctl restart nginx
```

---

## 📋 수정 사항 요약

### 1. ✅ 댓글 작성 (API 정상)
- 백엔드: `/posts/{id}/add_comment/` 액션 존재
- 프론트엔드: `communityAPI.addComment()` 정상 호출
- **문제**: AWS 서버에 마이그레이션 적용 안됨

### 2. ⏳ 게시글 공개 범위 재설계
**현재 로직**:
- `is_gym_only=true` → 내 체육관만
- `is_gym_only=false` → 전체 공개

**사용자 요구사항**:
- "내 체육관 전용" 체크 → 내 체육관에만 표시
- "전체 게시글" 체크 → 전체에만 표시
- 둘 다 체크 안하면 → ???

**재설계 필요**:
Option A: 
- `is_gym_only=true` → 내 체육관 탭에만
- `is_gym_only=false` → 전체 탭에만

Option B:
- `scope` 필드 추가: 'gym', 'all', 'both'
- 'gym' → 내 체육관만
- 'all' → 전체만
- 'both' → 둘 다 (기본값)

### 3. ⏳ 프로필 - 체육관 정보 수정
- 백엔드: Member 모델에 `gym` 필드 추가 완료
- 프론트엔드: ProfileScreen에 체육관 수정 UI 추가 필요

### 4. ⏳ 게시글 리스트 썸네일
- CommunityScreenV2에 이미지 썸네일 표시 추가
- 첫 번째 이미지만 작은 크기로 표시

### 5. ⏳ UI 디자인 개선
- 커뮤니티 UI 전체적으로 더 예쁘게

### 6. ⏳ 앱 아이콘 제작
- 현재: icon.png (기본 Expo 아이콘)
- 필요: 펌피 브랜드 아이콘

### 7. ⏳ 로그인 화면 아이콘
- 앱 아이콘과 동일하게

---

## 🚨 지금 당장 해야 할 일

### 우선순위 1: AWS 서버 배포
위의 배포 명령어 실행

### 우선순위 2: 테스트
```bash
# 댓글 API 테스트
curl -X POST http://3.27.28.175/api/posts/1/add_comment/ \
  -H "Content-Type: application/json" \
  -d '{"author": 4, "content": "테스트 댓글"}'
```

---

## 💡 관리자 페이지 사용법

### Django Admin 접속
```
URL: http://3.27.28.175/admin
계정: 슈퍼유저 생성 필요

# 슈퍼유저 생성 (AWS 서버에서)
python manage.py createsuperuser
```

### 공지사항 등록
1. Admin 로그인
2. "공지사항" 메뉴 클릭
3. "공지사항 추가" 버튼
4. 제목, 내용, 이미지 URL 입력
5. 체육관 선택 (선택사항)
6. "상단 고정" 체크 (선택사항)
7. 저장

### 배너 등록
1. Admin 로그인
2. "배너" 메뉴 클릭
3. "배너 추가" 버튼
4. 제목, 이미지 URL, 링크 입력
5. 정렬 순서 입력 (낮을수록 상단)
6. 시작일/종료일 설정
7. 저장

---

_작성일: 2025년 10월 26일_

