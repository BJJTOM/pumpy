# 🔥 지금 바로 AWS 배포하기!

## 현재 상황
- ✅ SSH 키 찾음: `pumpy-key.pem`
- ✅ APK 빌드 진행 중 (백그라운드)
- ⚠️ AWS 보안 그룹 차단됨 (SSH, HTTP 모두)

## 🚀 해결책: AWS 콘솔에서 직접 실행!

### 방법 1: Session Manager (가장 쉬움!)

1. **AWS 콘솔 접속**
   - https://console.aws.amazon.com/ec2/

2. **인스턴스 연결**
   - EC2 > 인스턴스
   - 인스턴스 선택 (3.27.28.175)
   - 상단 **연결** 버튼 클릭
   - **Session Manager** 탭 선택
   - **연결** 클릭

3. **배포 실행 (복사해서 붙여넣기)**

```bash
#!/bin/bash
set -e

echo "🚀 배포 시작..."

# 프로젝트로 이동 또는 클론
cd ~/pumpy 2>/dev/null || (cd ~ && git clone https://github.com/BJJTOM/pumpy.git && cd pumpy)

# 최신 코드
git fetch origin
git reset --hard origin/main
git pull origin main

echo "✅ 코드 업데이트 완료"

# Django
echo "🐍 Django 배포..."
cd gym_api
source venv/bin/activate 2>/dev/null || (python3 -m venv venv && source venv/bin/activate)
pip install -q -r requirements.txt
python manage.py makemigrations && python manage.py migrate
python manage.py collectstatic --noinput
sudo systemctl restart gunicorn

echo "✅ Django 완료"

# Next.js (최적화)
echo "⚛️  Next.js 배포..."
cd ../gym_web
npm install --prefer-offline --no-audit
export NODE_OPTIONS="--max-old-space-size=3072"
rm -rf .next
npm run build
pm2 delete gym-web 2>/dev/null || true
pm2 start npm --name "gym-web" -- start
pm2 save

echo "✅ Next.js 완료"

# Nginx
sudo systemctl restart nginx

echo "🎉 배포 완료! http://3.27.28.175"
```

**예상 시간**: 10-15분

---

### 방법 2: EC2 Instance Connect

1. **AWS 콘솔** > **EC2** > **인스턴스**
2. **연결** > **EC2 Instance Connect** 탭
3. **연결** 클릭
4. 위의 스크립트 붙여넣기

---

### 방법 3: 보안 그룹 열기 (근본 해결)

1. **AWS 콘솔** > **EC2** > **보안 그룹**
2. 인스턴스의 보안 그룹 선택
3. **인바운드 규칙 편집**
4. 다음 추가:
   - SSH (22): 0.0.0.0/0
   - HTTP (80): 0.0.0.0/0
   - HTTPS (443): 0.0.0.0/0
5. **저장**

그 다음:
```bash
ssh -i pumpy-key.pem ubuntu@3.27.28.175
# 위의 배포 스크립트 실행
```

---

## 📱 APK 상태

**빌드 진행 중** (백그라운드)

확인:
```powershell
Get-ChildItem C:\Users\guddn\Downloads\COCO\pumpy-app\android\app\build\outputs\apk\release\
```

**완료 시 위치**:
```
C:\Users\guddn\Downloads\COCO\pumpy-app\android\app\build\outputs\apk\release\app-release.apk
```

---

## ⏱️ 예상 완료 시간

| 작업 | 시간 | 상태 |
|------|------|------|
| AWS 배포 | 10-15분 | ⏳ 콘솔에서 실행 |
| APK 빌드 | 5-10분 | 🔄 진행 중 |

**총**: 약 15-20분

---

## ✅ 완료 후 확인

- http://3.27.28.175 (웹)
- http://3.27.28.175/admin (관리자)
- http://3.27.28.175/app (회원 앱)
- http://3.27.28.175/api (API)
- `app-release.apk` (모바일)

---

## 💡 빠른 시작

**지금 바로**:
1. https://console.aws.amazon.com/ec2/ 접속
2. Session Manager로 연결
3. 위의 스크립트 붙여넣기
4. 15분 대기
5. http://3.27.28.175 접속!

**모든 준비 완료! 시작하세요!** 🚀


