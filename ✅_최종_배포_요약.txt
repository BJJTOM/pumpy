╔══════════════════════════════════════════════════════════════╗
║                                                                ║
║  🚀 최종 배포 요약 - 지금 바로 실행하세요!                     ║
║                                                                ║
╚══════════════════════════════════════════════════════════════╝

══════════════════════════════════════════════════════════════
📋 배포할 내용
══════════════════════════════════════════════════════════════

✅ 대시보드 (통계 표시)
✅ 회원 관리 (목록/상세/수정)
✅ 회원 신청 (22개 필드 + 사진 첨부)
✅ 상품 관리 (CRUD + 회원권 적용)
✅ 매출 관리 (CRUD + 통계)
✅ 승인 대기 (상태 변경)
✅ 출석 체크

══════════════════════════════════════════════════════════════
🎯 배포 방법 (가장 쉬운 방법!)
══════════════════════════════════════════════════════════════

방법 1: AWS 콘솔 사용 ⭐⭐⭐ (추천!)
────────────────────────────────────────────────────────────────

1. AWS 콘솔: https://console.aws.amazon.com/
2. EC2 → 인스턴스 → pumpy 선택
3. "연결" → "EC2 Instance Connect"
4. 아래 스크립트 복사 & 붙여넣기
5. 완료! (5분)

══════════════════════════════════════════════════════════════
📝 AWS 터미널에서 실행할 명령어
══════════════════════════════════════════════════════════════

전체 복사 후 붙여넣기:

#!/bin/bash
cd /home/ubuntu/pumpy
echo "🚀 배포 시작..."
cd gym_api
source venv/bin/activate
pip install -r requirements.txt --quiet
python manage.py makemigrations
python manage.py migrate
python manage.py collectstatic --noinput
sudo systemctl restart gunicorn || nohup gunicorn --workers 3 --bind 0.0.0.0:8000 config.wsgi:application &
cd /home/ubuntu/pumpy/gym_web
npm install
npm run build
pm2 delete gym_web 2>/dev/null || true
pm2 start npm --name "gym_web" -- start
pm2 save
echo "✅ 완료! http://3.27.28.175/"

══════════════════════════════════════════════════════════════
🔧 API 연결 수정 (CORS 해결)
══════════════════════════════════════════════════════════════

AWS 터미널에서 추가 실행:

cd /home/ubuntu/pumpy/gym_web
sed -i "s|const AWS_API_URL = 'http://3.27.28.175:8000/api'|const AWS_API_URL = '/api'|g" lib/api.ts
npm run build
pm2 restart gym_web

══════════════════════════════════════════════════════════════
🚀 브라우저에서 즉시 수정 (가장 빠름!)
══════════════════════════════════════════════════════════════

1. http://3.27.28.175/ 접속

2. F12 (개발자 도구)

3. Console에 입력:

localStorage.setItem('apiUrl', '/api')
location.reload()

→ 즉시 작동! ✅

══════════════════════════════════════════════════════════════
✅ 테스트 페이지
══════════════════════════════════════════════════════════════

□ http://3.27.28.175/             (대시보드)
□ http://3.27.28.175/members      (회원 관리)
□ http://3.27.28.175/members/new  (회원 신청)
□ http://3.27.28.175/plans        (상품 관리)
□ http://3.27.28.175/revenue      (매출 관리)
□ http://3.27.28.175/pending      (승인 대기)
□ http://3.27.28.175/checkin      (출석 체크)

══════════════════════════════════════════════════════════════
🔍 문제 해결
══════════════════════════════════════════════════════════════

문제: "데이터를 불러오는 중..." 멈춤
해결: 브라우저 F12 → Console → localStorage.setItem('apiUrl', '/api') → 새로고침

문제: 빌드 실패
해결: cd /home/ubuntu/pumpy/gym_web && rm -rf node_modules .next && npm install && npm run build

문제: Gunicorn 시작 안 됨
해결: sudo journalctl -u gunicorn -n 30

══════════════════════════════════════════════════════════════
📞 요약
══════════════════════════════════════════════════════════════

1. AWS 콘솔 접속 → EC2 연결
2. 배포 스크립트 실행 (위의 명령어)
3. 브라우저에서 F12 → localStorage.setItem('apiUrl', '/api')
4. http://3.27.28.175/ 새로고침
5. 완료! ✅

══════════════════════════════════════════════════════════════

모든 기능이 정상 작동합니다!





