# ğŸ†˜ ê¸´ê¸‰ ì¸ìŠ¤í„´ìŠ¤ ë³µêµ¬ ê°€ì´ë“œ

## ğŸš¨ ìƒí™©: ì¬ë¶€íŒ… í›„ì—ë„ ì—°ê²°ì„± ê²€ì‚¬ ì‹¤íŒ¨

---

## âœ… í•´ê²° ë°©ë²• (ìˆœì„œëŒ€ë¡œ ì‹œë„)

### ë°©ë²• 1: ì¸ìŠ¤í„´ìŠ¤ ì¤‘ì§€ â†’ ì‹œì‘ (í•„ìˆ˜!)

**ì¬ë¶€íŒ…ê³¼ ë‹¤ë¦…ë‹ˆë‹¤! ë” ê°•ë ¥í•œ ë°©ë²•ì…ë‹ˆë‹¤.**

#### ë‹¨ê³„:

1. **AWS EC2 ì½˜ì†”ì—ì„œ ì¸ìŠ¤í„´ìŠ¤ ì„ íƒ**

2. **ì¸ìŠ¤í„´ìŠ¤ ìƒíƒœ** â†’ **ì¸ìŠ¤í„´ìŠ¤ ì¤‘ì§€**
   - âš ï¸ "ì¤‘ì§€"ë¥¼ í´ë¦­í•˜ë©´ ê²½ê³  ë©”ì‹œì§€ê°€ ë‚˜ì˜´
   - **"ì¤‘ì§€"** í™•ì¸ í´ë¦­

3. **ëŒ€ê¸° (1-2ë¶„)**
   - ìƒíƒœê°€ **"ì¤‘ì§€ë¨"**ìœ¼ë¡œ ë³€í•  ë•Œê¹Œì§€ ê¸°ë‹¤ë¦¼

4. **ì¸ìŠ¤í„´ìŠ¤ ìƒíƒœ** â†’ **ì¸ìŠ¤í„´ìŠ¤ ì‹œì‘**
   - **"ì‹œì‘"** í´ë¦­

5. **ëŒ€ê¸° (2-3ë¶„)**
   - ìƒíƒœê°€ **"ì‹¤í–‰ ì¤‘"**ìœ¼ë¡œ ë³€í•  ë•Œê¹Œì§€ ê¸°ë‹¤ë¦¼

6. **ìƒíƒœ ê²€ì‚¬ í™•ì¸**
   - í•˜ë‹¨ **"ìƒíƒœ ê²€ì‚¬"** íƒ­ì—ì„œ 2/2 ê²€ì‚¬ í†µê³¼ í™•ì¸

#### âš ï¸ ì£¼ì˜ì‚¬í•­:
- Public IPê°€ ë³€ê²½ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤!
- í˜„ì¬ IP: 3.27.28.175
- ë³€ê²½ë˜ë©´ APKì˜ URLë„ ì—…ë°ì´íŠ¸ í•„ìš”

---

### ë°©ë²• 2: ì‹œìŠ¤í…œ ë¡œê·¸ í™•ì¸

ë¬¸ì œ ì›ì¸ì„ íŒŒì•…í•©ë‹ˆë‹¤:

1. **ì¸ìŠ¤í„´ìŠ¤ ì„ íƒ**

2. **ì‘ì—…** â†’ **ëª¨ë‹ˆí„°ë§ ë° ë¬¸ì œ í•´ê²°** â†’ **ì‹œìŠ¤í…œ ë¡œê·¸ ê°€ì ¸ì˜¤ê¸°**

3. **ì—ëŸ¬ ë©”ì‹œì§€ ì°¾ê¸°:**

**ì¼ë°˜ì ì¸ ì—ëŸ¬:**

```bash
# ë””ìŠ¤í¬ í’€
"No space left on device"
"disk full"

# ë©”ëª¨ë¦¬ ë¶€ì¡±
"Out of memory"
"OOM killer"
"Kernel panic"

# ë„¤íŠ¸ì›Œí¬ ë¬¸ì œ
"network unreachable"
"failed to bring up"

# ë¶€íŒ… ì‹¤íŒ¨
"Failed to start"
"systemd[1]: Failed"
```

---

### ë°©ë²• 3: ì¸ìŠ¤í„´ìŠ¤ íƒ€ì… í™•ì¸ ë° ë³€ê²½

í˜„ì¬ ì¸ìŠ¤í„´ìŠ¤ê°€ ë¦¬ì†ŒìŠ¤ ë¶€ì¡±ì¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤:

1. **ì¸ìŠ¤í„´ìŠ¤ ì„ íƒ**

2. **ì‘ì—…** â†’ **ì¸ìŠ¤í„´ìŠ¤ ì„¤ì •** â†’ **ì¸ìŠ¤í„´ìŠ¤ ìœ í˜• ë³€ê²½**

3. **ë” í° íƒ€ì…ìœ¼ë¡œ ë³€ê²½:**
   - í˜„ì¬: t2.micro ë˜ëŠ” t3.micro?
   - ì¶”ì²œ: t3.small ë˜ëŠ” t3.medium

4. **ì ìš© ë° ì‹œì‘**

---

### ë°©ë²• 4: EBS ë³¼ë¥¨ í™•ì¸

ë””ìŠ¤í¬ ë¬¸ì œì¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤:

1. **EC2** â†’ **ë³¼ë¥¨** (ì™¼ìª½ ë©”ë‰´)

2. **ì¸ìŠ¤í„´ìŠ¤ ë³¼ë¥¨ ì°¾ê¸°**
   - ì¸ìŠ¤í„´ìŠ¤ IDë¡œ í•„í„°ë§

3. **ìƒíƒœ í™•ì¸:**
   - âœ… "ì‚¬ìš© ì¤‘" (in-use) â†’ ì •ìƒ
   - âŒ "ì˜¤ë¥˜" (error) â†’ ë¬¸ì œ ìˆìŒ

4. **ë¬¸ì œ ì‹œ ì¡°ì¹˜:**
   - ë³¼ë¥¨ ë¶„ë¦¬
   - ìƒˆ ì¸ìŠ¤í„´ìŠ¤ì— ì—°ê²°
   - ë°ì´í„° ë³µêµ¬

---

### ë°©ë²• 5: ìƒˆ ì¸ìŠ¤í„´ìŠ¤ ìƒì„± (ìµœí›„ì˜ ìˆ˜ë‹¨)

ìœ„ ë°©ë²•ì´ ëª¨ë‘ ì‹¤íŒ¨í•˜ë©´:

#### Option A: AMIì—ì„œ ë³µì› (ë°±ì—…ì´ ìˆëŠ” ê²½ìš°)

1. **EC2** â†’ **AMI** (ì™¼ìª½ ë©”ë‰´)
2. ìµœì‹  AMI ì„ íƒ
3. **ì‹œì‘** í´ë¦­
4. ì„¤ì • ì™„ë£Œ í›„ ìƒˆ ì¸ìŠ¤í„´ìŠ¤ ì‹œì‘

#### Option B: ìƒˆ ì¸ìŠ¤í„´ìŠ¤ ìƒì„±

1. **ì¸ìŠ¤í„´ìŠ¤ ì‹œì‘** í´ë¦­
2. **Ubuntu Server 22.04 LTS** ì„ íƒ
3. **ì¸ìŠ¤í„´ìŠ¤ ìœ í˜•:** t3.small ì´ìƒ
4. **í‚¤ í˜ì–´:** pumpy-key.pem ì‚¬ìš©
5. **ë³´ì•ˆ ê·¸ë£¹:** ê¸°ì¡´ ê²ƒ ì‚¬ìš© ë˜ëŠ” ìƒˆë¡œ ìƒì„±
6. **ì‹œì‘**

#### ìƒˆ ì¸ìŠ¤í„´ìŠ¤ ì„¤ì •:

```bash
# SSH ì ‘ì†
ssh -i pumpy-key.pem ubuntu@[ìƒˆ_IP]

# ì‹œìŠ¤í…œ ì—…ë°ì´íŠ¸
sudo apt update && sudo apt upgrade -y

# Python & Node.js ì„¤ì¹˜
sudo apt install python3-pip python3-venv -y
curl -fsSL https://deb.nodesource.com/setup_20.x | sudo -E bash -
sudo apt install nodejs -y

# PM2 ì„¤ì¹˜
sudo npm install -g pm2

# Nginx ì„¤ì¹˜
sudo apt install nginx -y

# Git í´ë¡ 
cd ~
git clone https://github.com/BJJTOM/pumpy.git
cd pumpy

# ë°±ì—”ë“œ ì„¤ì •
cd gym_api
python3 -m venv venv
source venv/bin/activate
pip install -r requirements.txt
python manage.py migrate
python manage.py collectstatic --noinput

# Gunicorn ì„œë¹„ìŠ¤ ì„¤ì •
sudo nano /etc/systemd/system/gunicorn.service

[Unit]
Description=Gunicorn daemon for Pumpy API
After=network.target

[Service]
User=ubuntu
Group=www-data
WorkingDirectory=/home/ubuntu/pumpy/gym_api
Environment="PATH=/home/ubuntu/pumpy/gym_api/venv/bin"
ExecStart=/home/ubuntu/pumpy/gym_api/venv/bin/gunicorn --workers 3 --bind 0.0.0.0:8000 config.wsgi:application

[Install]
WantedBy=multi-user.target

# ì„œë¹„ìŠ¤ ì‹œì‘
sudo systemctl start gunicorn
sudo systemctl enable gunicorn

# í”„ë¡ íŠ¸ì—”ë“œ ì„¤ì •
cd ~/pumpy/gym_web
npm install
npm run build
pm2 start npm --name gym-web -- start
pm2 save
pm2 startup

# Nginx ì„¤ì •
sudo nano /etc/nginx/sites-available/pumpy

server {
    listen 80;
    server_name _;
    
    location / {
        proxy_pass http://localhost:3000;
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection 'upgrade';
        proxy_set_header Host $host;
        proxy_cache_bypass $http_upgrade;
    }
    
    location /api {
        proxy_pass http://localhost:8000;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
    }
}

sudo ln -s /etc/nginx/sites-available/pumpy /etc/nginx/sites-enabled/
sudo nginx -t
sudo systemctl restart nginx
```

---

## ğŸ¯ ë¹ ë¥¸ ì¡°ì¹˜ (ì§€ê¸ˆ!)

### 1ë‹¨ê³„: ì¸ìŠ¤í„´ìŠ¤ ì¤‘ì§€ â†’ ì‹œì‘

AWS ì½˜ì†”ì—ì„œ:
```
1. ì¸ìŠ¤í„´ìŠ¤ ì„ íƒ
2. ì¸ìŠ¤í„´ìŠ¤ ìƒíƒœ â†’ ì¸ìŠ¤í„´ìŠ¤ ì¤‘ì§€
3. ëŒ€ê¸° (1-2ë¶„)
4. ì¸ìŠ¤í„´ìŠ¤ ìƒíƒœ â†’ ì¸ìŠ¤í„´ìŠ¤ ì‹œì‘
5. ëŒ€ê¸° (2-3ë¶„)
```

### 2ë‹¨ê³„: IP í™•ì¸

ìƒˆ IPê°€ í• ë‹¹ë˜ì—ˆì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤:
- ì¸ìŠ¤í„´ìŠ¤ ìƒì„¸ ì •ë³´ì—ì„œ **í¼ë¸”ë¦­ IPv4 ì£¼ì†Œ** í™•ì¸
- ë³€ê²½ë˜ì—ˆìœ¼ë©´ ë©”ëª¨!

### 3ë‹¨ê³„: ì—°ê²° í…ŒìŠ¤íŠ¸

PowerShellì—ì„œ:
```powershell
Test-NetConnection -ComputerName [IPì£¼ì†Œ] -Port 80
```

---

## ğŸ“Š ì²´í¬ë¦¬ìŠ¤íŠ¸

- [ ] ì¸ìŠ¤í„´ìŠ¤ ì¤‘ì§€ â†’ ì‹œì‘ ì‹œë„
- [ ] IP ì£¼ì†Œ í™•ì¸ (ë³€ê²½ ì—¬ë¶€)
- [ ] ìƒíƒœ ê²€ì‚¬ 2/2 í†µê³¼ í™•ì¸
- [ ] ì‹œìŠ¤í…œ ë¡œê·¸ í™•ì¸
- [ ] í•„ìš”ì‹œ ì¸ìŠ¤í„´ìŠ¤ íƒ€ì… ì—…ê·¸ë ˆì´ë“œ
- [ ] ìµœì•…ì˜ ê²½ìš° ìƒˆ ì¸ìŠ¤í„´ìŠ¤ ìƒì„±

---

## ğŸ’¡ ì˜ˆë°© ì¡°ì¹˜ (ë³µêµ¬ í›„)

### 1. Elastic IP í• ë‹¹

IP ë³€ê²½ ë°©ì§€:

1. **EC2** â†’ **íƒ„ë ¥ì  IP** (ì™¼ìª½ ë©”ë‰´)
2. **íƒ„ë ¥ì  IP ì£¼ì†Œ í• ë‹¹**
3. í• ë‹¹ëœ IPë¥¼ ì¸ìŠ¤í„´ìŠ¤ì— ì—°ê²°

### 2. ì •ê¸° ë°±ì—… (AMI)

1. ì¸ìŠ¤í„´ìŠ¤ ì„ íƒ
2. **ì‘ì—…** â†’ **ì´ë¯¸ì§€ ë° í…œí”Œë¦¿** â†’ **ì´ë¯¸ì§€ ìƒì„±**
3. ì£¼ê¸°ì ìœ¼ë¡œ ë°±ì—…

### 3. CloudWatch ì•ŒëŒ ì„¤ì •

- CPU ì‚¬ìš©ë¥ 
- ë©”ëª¨ë¦¬ ì‚¬ìš©ë¥ 
- ë””ìŠ¤í¬ ì‚¬ìš©ë¥ 
- ë„¤íŠ¸ì›Œí¬ íŠ¸ë˜í”½

---

## ğŸ“ ê¸´ê¸‰ ì—°ë½

AWS Support:
- https://console.aws.amazon.com/support

ë¬¸ì„œ:
- https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/TroubleshootingInstances.html

---

**ì‘ì„±:** 2025-10-25
**ìƒí™©:** ì¬ë¶€íŒ… í›„ì—ë„ ì—°ê²°ì„± ê²€ì‚¬ ì‹¤íŒ¨
**ì¡°ì¹˜:** ì¤‘ì§€ â†’ ì‹œì‘ í•„ìˆ˜!

