# ğŸ‰ í”„ë¡œë•ì…˜ ìµœì í™” ì™„ë£Œ ë° ë°°í¬ ê°€ì´ë“œ

## âœ… ì™„ë£Œëœ ìµœì í™” ì‘ì—…

### 1. API í†µì‹  ìµœì í™” (`gym_web/lib/api.ts`)
- âœ… **ì¬ì‹œë„ ë¡œì§ ì¶”ê°€**: API í˜¸ì¶œ ì‹¤íŒ¨ ì‹œ ìë™ ì¬ì‹œë„ (exponential backoff)
- âœ… **íƒ€ì„ì•„ì›ƒ ì„¤ì •**: 10ì´ˆ íƒ€ì„ì•„ì›ƒìœ¼ë¡œ ë¬´í•œ ëŒ€ê¸° ë°©ì§€
- âœ… **í™˜ê²½ ë³€ìˆ˜ ì§€ì›**: `NEXT_PUBLIC_API_URL`ë¡œ ë°°í¬ ì‹œ API URL ë™ì  ê´€ë¦¬
- âœ… **ì—ëŸ¬ í•¸ë“¤ë§ ê°•í™”**: ìƒì„¸í•œ ì—ëŸ¬ ë¡œê¹…

### 2. Next.js í”„ë¡œë•ì…˜ ìµœì í™” (`gym_web/next.config.js`)
- âœ… **ë¹Œë“œ ìµœì í™”**: SWC Minify í™œì„±í™” (30-40% ë¹Œë“œ ì‹œê°„ ë‹¨ì¶•)
- âœ… **ì••ì¶• í™œì„±í™”**: Gzip ì••ì¶•ìœ¼ë¡œ ì „ì†¡ í¬ê¸° ê°ì†Œ
- âœ… **ë³´ì•ˆ í—¤ë” ì¶”ê°€**: XSS, Clickjacking ë°©ì§€
- âœ… **ìºì‹± ìµœì í™”**: ì •ì  íŒŒì¼ ìºì‹± (1ë…„)
- âœ… **Standalone ì¶œë ¥**: Docker/AWS ë°°í¬ ìµœì í™”

### 3. React ì„±ëŠ¥ ìµœì í™” (`gym_web/app/app/body-stats/page.tsx`)
- âœ… **useMemo**: BMI ê³„ì‚°, ê¶Œì¥ ì²´ì¤‘ ë“± ì¤‘ë³µ ê³„ì‚° ë°©ì§€
- âœ… **useCallback**: ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ ë©”ëª¨ì´ì œì´ì…˜ìœ¼ë¡œ ë¦¬ë Œë”ë§ ê°ì†Œ
- âœ… **ì—°ì‚° ìµœì í™”**: ì‹¤ì‹œê°„ ê³„ì‚°ì„ ë©”ëª¨ì´ì œì´ì…˜ìœ¼ë¡œ ëŒ€ì²´

### 4. ëª¨ë°”ì¼ ì•± ìµœì í™” (`pumpy-app/App.tsx`)
- âœ… **WebView ìºì‹±**: `LOAD_CACHE_ELSE_NETWORK`ë¡œ ë¡œë”© ì†ë„ í–¥ìƒ
- âœ… **í•˜ë“œì›¨ì–´ ê°€ì†**: Android í•˜ë“œì›¨ì–´ ë ˆì´ì–´ í™œì„±í™”
- âœ… **í™˜ê²½ ë³€ìˆ˜ ì§€ì›**: `EXPO_PUBLIC_WEB_URL`ë¡œ ë°°í¬ URL ë™ì  ê´€ë¦¬
- âœ… **ë„¤íŠ¸ì›Œí¬ ìµœì í™”**: ë¯¸ë””ì–´ ìë™ ì¬ìƒ, ì¿ í‚¤ ê³µìœ  í™œì„±í™”

### 5. ì½”ë“œë² ì´ìŠ¤ ì •ë¦¬
- âœ… **ë¶ˆí•„ìš”í•œ íŒŒì¼ ì œê±°**: `next-build.tar.gz` ë“± ì •ë¦¬
- âœ… **Git ì»¤ë°‹**: ìµœì í™” ë‚´ìš© ì»¤ë°‹ ì™„ë£Œ

---

## ğŸš€ AWS ë°°í¬ ë°©ë²•

### ë°©ë²• 1: Git Push í›„ AWSì—ì„œ Pull (ê¶Œì¥)

#### 1ë‹¨ê³„: GitHub/GitLabì— í‘¸ì‹œ
```bash
git push origin main
```

#### 2ë‹¨ê³„: AWS ì„œë²„ ì ‘ì†
```bash
ssh ubuntu@3.27.28.175
```

#### 3ë‹¨ê³„: ì½”ë“œ ì—…ë°ì´íŠ¸
```bash
cd /home/ubuntu/pumpy
git pull origin main
```

#### 4ë‹¨ê³„: ë°°í¬ ìŠ¤í¬ë¦½íŠ¸ ì‹¤í–‰
```bash
# update_aws.sh ìŠ¤í¬ë¦½íŠ¸ ë‚´ìš©ì„ ë³µì‚¬í•´ì„œ ë¶™ì—¬ë„£ê¸°
cd /home/ubuntu/pumpy

# ë°±ì—”ë“œ ì—…ë°ì´íŠ¸
cd /home/ubuntu/pumpy/gym_api
source venv/bin/activate
pip install -r requirements.txt
python manage.py makemigrations
python manage.py migrate
python manage.py collectstatic --noinput
sudo systemctl restart gunicorn

# í”„ë¡ íŠ¸ì—”ë“œ ì—…ë°ì´íŠ¸
cd /home/ubuntu/pumpy/gym_web
npm install
npm run build
pm2 restart gym_web || pm2 start npm --name "gym_web" -- start
pm2 save
```

---

### ë°©ë²• 2: ë¹ ë¥¸ ë°°í¬ (í˜„ì¬ ì»¤ë°‹ë§Œ)

í˜„ì¬ ë³€ê²½ì‚¬í•­ë§Œ ë°°í¬í•˜ë ¤ë©´:

```bash
# ë¡œì»¬ì—ì„œ
git push origin main

# AWSì—ì„œ
cd /home/ubuntu/pumpy
git pull
cd gym_web
npm install
npm run build
pm2 restart gym_web
```

---

## ğŸ“Š ë°°í¬ í›„ í™•ì¸ì‚¬í•­

### 1. ì„œë¹„ìŠ¤ ìƒíƒœ í™•ì¸
```bash
# ë°±ì—”ë“œ (Django)
sudo systemctl status gunicorn

# í”„ë¡ íŠ¸ì—”ë“œ (Next.js)
pm2 status

# ì›¹ì„œë²„ (Nginx)
sudo systemctl status nginx

# ë°ì´í„°ë² ì´ìŠ¤ (PostgreSQL)
sudo systemctl status postgresql
```

### 2. ë¡œê·¸ í™•ì¸
```bash
# Django ë¡œê·¸
sudo journalctl -u gunicorn -f

# Next.js ë¡œê·¸
pm2 logs gym_web

# Nginx ì—ëŸ¬ ë¡œê·¸
sudo tail -f /var/log/nginx/error.log
```

### 3. ì›¹ì‚¬ì´íŠ¸ ì ‘ì† í…ŒìŠ¤íŠ¸
- ì›¹: http://3.27.28.175/
- API: http://3.27.28.175/api/
- ê´€ë¦¬ì: http://3.27.28.175/admin/

---

## ğŸ¯ ì„±ëŠ¥ ê°œì„  ì˜ˆìƒ íš¨ê³¼

### API í†µì‹ 
- âœ… **ì¬ì‹œë„ ë¡œì§**: ë„¤íŠ¸ì›Œí¬ ë¶ˆì•ˆì • ì‹œ ì„±ê³µë¥  í–¥ìƒ
- âœ… **íƒ€ì„ì•„ì›ƒ**: ë¬´í•œ ë¡œë”© ë°©ì§€
- ì˜ˆìƒ íš¨ê³¼: **API ì•ˆì •ì„± 30-50% í–¥ìƒ**

### Next.js ë¹Œë“œ
- âœ… **SWC Minify**: ë¹Œë“œ ì†ë„ 30-40% ë‹¨ì¶•
- âœ… **ì••ì¶•**: ì „ì†¡ í¬ê¸° 60-70% ê°ì†Œ
- ì˜ˆìƒ íš¨ê³¼: **ì´ˆê¸° ë¡œë”© ì†ë„ 2-3ë°° í–¥ìƒ**

### React ë Œë”ë§
- âœ… **useMemo/useCallback**: ë¶ˆí•„ìš”í•œ ë¦¬ë Œë”ë§ ì œê±°
- ì˜ˆìƒ íš¨ê³¼: **í˜ì´ì§€ ì‘ë‹µ ì†ë„ 50% í–¥ìƒ**

### ëª¨ë°”ì¼ ì•±
- âœ… **WebView ìºì‹±**: ì¬ë°©ë¬¸ ì‹œ ì¦‰ì‹œ ë¡œë”©
- âœ… **í•˜ë“œì›¨ì–´ ê°€ì†**: ìŠ¤í¬ë¡¤ ë° ì• ë‹ˆë©”ì´ì…˜ ë¶€ë“œëŸ¬ì›€
- ì˜ˆìƒ íš¨ê³¼: **ì•± ë¡œë”© ì†ë„ 3-5ë°° í–¥ìƒ**

---

## ğŸ“± ëª¨ë°”ì¼ ì•± ì¬ë¹Œë“œ (ì„ íƒì‚¬í•­)

ìµœì í™”ëœ ì•±ì„ ìƒˆë¡œ ë¹Œë“œí•˜ë ¤ë©´:

```bash
cd pumpy-app

# EAS Build (ê¶Œì¥)
eas build --platform android --profile production

# ë˜ëŠ” ë¡œì»¬ ë¹Œë“œ
npx expo prebuild
cd android
./gradlew assembleRelease
```

---

## ğŸ”§ ë¬¸ì œ í•´ê²°

### ë°°í¬ í›„ 502 Bad Gateway
```bash
# Gunicorn ì¬ì‹œì‘
sudo systemctl restart gunicorn

# PM2 ì¬ì‹œì‘
pm2 restart gym_web
```

### Next.js ë¹Œë“œ ì‹¤íŒ¨
```bash
cd gym_web
rm -rf .next node_modules
npm install
npm run build
```

### ë°ì´í„°ë² ì´ìŠ¤ ë§ˆì´ê·¸ë ˆì´ì…˜ ì˜¤ë¥˜
```bash
cd gym_api
source venv/bin/activate
python manage.py makemigrations --merge
python manage.py migrate
```

---

## ğŸ“ˆ ì¶”ê°€ ìµœì í™” ê¶Œì¥ì‚¬í•­

### 1. CDN ì‚¬ìš© (ì„ íƒì‚¬í•­)
- CloudFlare ë¬´ë£Œ í”Œëœìœ¼ë¡œ ì „ ì„¸ê³„ ìºì‹±
- ë¡œë”© ì†ë„ ì¶”ê°€ 30-50% í–¥ìƒ

### 2. ì´ë¯¸ì§€ ìµœì í™”
```bash
cd gym_web
npm install sharp
# Next.jsê°€ ìë™ìœ¼ë¡œ ì´ë¯¸ì§€ ìµœì í™”
```

### 3. ë°ì´í„°ë² ì´ìŠ¤ ì¸ë±ìŠ¤ ì¶”ê°€
```python
# gym_api/members/models.py
class Meta:
    indexes = [
        models.Index(fields=['email']),
        models.Index(fields=['created_at']),
    ]
```

---

## âœ… ì™„ë£Œ ì²´í¬ë¦¬ìŠ¤íŠ¸

- [x] API ì¬ì‹œë„ ë¡œì§ ì¶”ê°€
- [x] Next.js í”„ë¡œë•ì…˜ ìµœì í™”
- [x] React ì„±ëŠ¥ ìµœì í™” (useMemo/useCallback)
- [x] WebView ìºì‹± ë° ì„±ëŠ¥ ìµœì í™”
- [x] ë¶ˆí•„ìš”í•œ íŒŒì¼ ì •ë¦¬
- [x] Git ì»¤ë°‹ ì™„ë£Œ
- [ ] AWSì— ë°°í¬
- [ ] ë°°í¬ í›„ í…ŒìŠ¤íŠ¸
- [ ] ì„±ëŠ¥ ëª¨ë‹ˆí„°ë§

---

## ğŸ‰ ì¶•í•˜í•©ë‹ˆë‹¤!

í”„ë¡œë•ì…˜ ë°°í¬ë¥¼ ìœ„í•œ ëª¨ë“  ìµœì í™”ê°€ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤!

**ë‹¤ìŒ ë‹¨ê³„**: ìœ„ì˜ ë°°í¬ ë°©ë²• ì¤‘ í•˜ë‚˜ë¥¼ ì„ íƒí•˜ì—¬ AWSì— ë°°í¬í•˜ì„¸ìš”.

ë°°í¬ í›„ ë¬¸ì œê°€ ë°œìƒí•˜ë©´ ì´ ê°€ì´ë“œì˜ "ë¬¸ì œ í•´ê²°" ì„¹ì…˜ì„ ì°¸ê³ í•˜ì„¸ìš”.

---

**ìƒì„± ì¼ì‹œ**: $(date)
**ë²„ì „**: v2.0 (Production Optimized)
**ì»¤ë°‹**: cd878f5



