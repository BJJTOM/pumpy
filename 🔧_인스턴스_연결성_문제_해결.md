# 🔧 AWS 인스턴스 연결성 문제 해결

## 🚨 현재 문제
- **인스턴스 연결성 검사 실패** (빨간색 X)
- 원인: 보안 그룹에서 포트 차단

---

## ✅ 해결 방법 1: 보안 그룹 수정 (5분)

### 1단계: 보안 그룹 페이지로 이동
1. 현재 화면에서 **보안** 탭 클릭
2. 보안 그룹 이름 클릭 (예: sg-xxxxx)

### 2단계: 인바운드 규칙 편집
1. **인바운드 규칙** 탭 클릭
2. **인바운드 규칙 편집** 버튼 클릭

### 3단계: 필수 포트 추가
**다음 3개 규칙을 추가하세요:**

| 유형 | 프로토콜 | 포트 범위 | 소스 | 설명 |
|------|---------|----------|------|------|
| SSH | TCP | 22 | 0.0.0.0/0 | SSH 접속 |
| HTTP | TCP | 80 | 0.0.0.0/0 | 웹사이트 |
| HTTPS | TCP | 443 | 0.0.0.0/0 | 보안 웹 |

### 4단계: 규칙 저장
**규칙 저장** 버튼 클릭

### 5단계: 5분 대기
상태 검사가 자동으로 업데이트됩니다.

---

## ✅ 해결 방법 2: Session Manager 사용 (즉시)

**보안 그룹 수정 없이 바로 배포 가능!**

### 1단계: Session Manager 접속
1. 현재 화면에서 **연결** 버튼 클릭
2. **Session Manager** 탭 선택
3. **연결** 클릭

### 2단계: 배포 실행 (Ctrl+V)
```bash
cd ~/pumpy 2>/dev/null || (cd ~ && git clone https://github.com/BJJTOM/pumpy.git && cd pumpy)
git pull origin main
cd gym_api && source venv/bin/activate 2>/dev/null || (python3 -m venv venv && source venv/bin/activate)
pip install -q -r requirements.txt
python manage.py makemigrations && python manage.py migrate && python manage.py collectstatic --noinput
sudo systemctl restart gunicorn
cd ../gym_web && npm install --prefer-offline --no-audit
export NODE_OPTIONS="--max-old-space-size=3072"
rm -rf .next && npm run build
pm2 delete gym-web 2>/dev/null || true && pm2 start npm --name "gym-web" -- start && pm2 save
sudo systemctl restart nginx
echo "🎉 배포 완료! http://3.27.28.175"
```

**예상 시간**: 10-15분

---

## 🎯 어떤 방법을 선택할까?

### 즉시 배포하려면: Session Manager (방법 2)
- ✅ 지금 바로 가능
- ✅ 보안 그룹 수정 불필요
- ✅ 배포 후 서비스 작동

### 근본적 해결: 보안 그룹 수정 (방법 1)
- ✅ SSH, HTTP 접속 가능
- ✅ 브라우저에서 웹사이트 접속
- ⏱️ 5분 소요

---

## 💡 권장 순서

1. **지금 바로**: Session Manager로 배포 (15분)
2. **그 다음**: 보안 그룹 포트 열기 (5분)
3. **완료**: http://3.27.28.175 접속 확인

---

## 🚀 지금 바로 실행!

**Session Manager 접속 방법:**
1. 현재 화면 > **연결** 버튼
2. **Session Manager** 탭
3. **연결** 클릭
4. Ctrl+V (배포 명령어)
5. 15분 대기

**배포 완료 후:**
- 보안 그룹 포트 열기
- http://3.27.28.175 접속
- 웹사이트 확인

---

## ✅ 완료 확인

배포 후 다음을 확인하세요:

**인스턴스 상태 (5분 후):**
- ✅ 시스템 연결성: 통과
- ✅ 인스턴스 연결성: 통과 (초록색)

**웹사이트 접속:**
- ✅ http://3.27.28.175
- ✅ http://3.27.28.175/admin
- ✅ http://3.27.28.175/app

---

## 🎊 완료!

모든 상태 검사가 **통과**되면 완전히 해결된 것입니다!


